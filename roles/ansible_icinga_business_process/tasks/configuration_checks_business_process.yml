---

- name: check the configuration of the business process
  assert:
    that:
      - businessprocess.title is defined
      - businessprocess.owner is defined
      - businessprocess.menu in (True False)
      - businessprocess.statetype == 'soft' or businessprocess.statetype == 'hard'
      - businessprocess.nodes|length>0

- name: check the configuration of the nodes
  assert:
    that:
      - node.name is defined
      - node.displayname is defined
      - node.operator is defined
      - node.visible in (True False)
      - node.checks|length>0
  loop: "{{ businessprocess.nodes }}"
  loop_control:
    loop_var: node

- name: perform node configuration checks
  include_tasks: configuration_checks_node.yml
  loop: "{{ businessprocess.nodes }}"
  loop_control:
    loop_var: node
