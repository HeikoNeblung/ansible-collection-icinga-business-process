### Business Process Config File ###
#
# Title           : {{ item.title }}
# Description     : {{ item.description }}
# Owner           : {{ item.owner }}
# AddToMenu       : {{ item.menu }}
# Statetype       : {{ item.statetype }}
#
###################################

{% for node in item.nodes -%}
	{%- set checks = [] -%}
	{%- for check in node.checks -%}
		{%- if check.type == 'host' -%}
			{%- set check_string = check.name + ';Hoststatus' -%}
		{%- elif check.type == 'service' -%}
			{%- set check_string = check.name + ';' + check.service -%}
		{%- elif check.type == 'node' -%}
			{%- if check.process is defined -%}
				{%- set check_string = '@' + check.process + ':' + check.name -%}
			{%- else -%}
				{%- set check_string = check.name -%}
			{%- endif -%}
		{%- endif -%}
		{{ checks.append(check_string) }}
	{%- endfor -%}

{% if node.operator is defined %}
{{ node.name }} = {{ node.operator }}: {{ checks|join(' + ') }}
{% else %}
{{ node.name }} = {{ checks|join(' & ') }}
{% endif %}
display 1;{{ node.name }};{{ node.displayname }}

{% endfor %}

